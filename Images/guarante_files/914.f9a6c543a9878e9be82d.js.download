/*! For license information please see 914.f9a6c543a9878e9be82d.js.LICENSE.txt */
"use strict";(self.webpackChunkplatform=self.webpackChunkplatform||[]).push([[914],{58855:function(t,e,n){n.d(e,{Z:function(){return v}});var r=n(23080);n(87300),n(96065);class i{constructor(t,e){this.environment=t,this.collectors=e.collectors,this.event=this.buildEvent(e.event),this.data=e.data,this.log(),this.send()}buildEvent(t){return t.join("-")}log(){if("production"!=this.environment){let t="HarleyEvent";Array.isArray(this.data)&&(t+=" (batched)"),console.debug(t,this.constructor.name,{event:this.event,data:this.data})}}}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}(0,r.Z)(i,"supportsBatching",!1);class a extends i{buildEvent(t){return t.join(".")}send(){"undefined"!=typeof dataLayer&&dataLayer.push(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({event:this.event},this.data))}}class s extends i{send(){"undefined"!=typeof Intercom&&Intercom("trackEvent",this.event,this.data)}}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}class u extends i{buildEvent(t){return t.join(".")}send(){"production"===this.environment&&"undefined"!=typeof fbq&&fbq("track",this.event,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.data))}}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}class d extends i{buildEvent(t){return t.join(".")}send(){"production"===this.environment&&"undefined"!=typeof fbq&&fbq("trackCustom",this.event,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.data))}}var f=n(75078);class h extends i{buildEvent(t){return"object"==typeof t?t.join("."):t}send(){const t=Array.isArray(this.data)?{data:Array.from(this.data)}:this.data;t.collectors=this.collectors;try{"undefined"!=typeof HarleyEventStore&&HarleyEventStore.track(this.event,t)}catch(t){(0,f.Tb)(t)}}}(0,r.Z)(h,"supportsBatching",!0);class v{static initialize(){if("undefined"==typeof document)return;const t=document.querySelectorAll("[data-harley-event]");for(let e=t.length-1;e>=0;e--)t[e].addEventListener("click",(function(){new v(JSON.parse(this.dataset.harleyEvent))}));document.dispatchEvent(new CustomEvent("HarleyEventReady"))}constructor(t){(0,r.Z)(this,"allCollectors",{GoogleAnalytics:a,Intercom:s,Facebook:u,FacebookCustom:d,Harley:h});const e=this.collectors(t.collectors);t.data=void 0===t.data?{}:t.data;const n=document.getElementsByName("htp:environment")[0].content;t.event=Array.isArray(t.event)?t.event:[t.event],window.location.hostname.startsWith("admin")&&t.event.splice(0,0,"admin");const i=window.location.hostname.split(".");i.length>2&&(t.data.subdomain=i[0]);const{event:o,data:c}=t;e.forEach((t=>{Array.isArray(c)&&!this.allCollectors[t].supportsBatching?c.forEach((r=>{new this.allCollectors[t](n,{data:r,event:o,collectors:e})})):new this.allCollectors[t](n,{event:o,data:c,collectors:e})}))}collectors(t){return 0===t.length?["Harley"]:Array.from(new Set(t.concat(["Harley"])))}}"undefined"!=typeof window&&void 0===window.HarleyEvent&&(window.HarleyEvent=v)},54835:function(){var t=function(t,e,n,r){var i="",o="";if(n){var a=new Date;a.setTime(a.getTime()+60*n*1e3),i="; expires="+a.toGMTString()}r&&(o="; domain="+r),document.cookie=t+"="+escape(e)+i+o+"; path=/; samesite=lax"},e={urlPrefix:"",visitsUrl:"/ahoy/visits",eventsUrl:"/ahoy/events",page:null,platform:"Web",useBeacon:!0,startOnReady:!0,trackVisits:!0,cookies:!0,cookieDomain:null,headers:{},visitParams:{},withCredentials:!1,visitDuration:240,visitorDuration:1051200},n=window.ahoy||window.Ahoy||{};n.configure=function(t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},n.configure(n);var r,i,o,a,s=window.jQuery||window.Zepto||window.$,c=!1,u=[],l="undefined"!=typeof JSON&&void 0!==JSON.stringify,d=[];function f(){return e.urlPrefix+e.eventsUrl}function h(n,r,i){t(n,r,i,e.cookieDomain||e.domain)}function v(t){return function(t){var e,n,r=t+"=",i=document.cookie.split(";");for(e=0;e<i.length;e++){for(n=i[e];" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(r))return unescape(n.substring(r.length,n.length))}return null}(t)}function p(e){t(e,"",-1)}function y(t){v("ahoy_debug")&&window.console.log(t)}function w(){for(var t;t=u.shift();)t();c=!0}function g(t,e){var n=t.matches||t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return n?n.apply(t,[e])?t:t.parentElement?g(t.parentElement,e):null:(y("Unable to match"),null)}function m(t,e,n){document.addEventListener(t,(function(t){var r=g(t.target,e);r&&n.call(r,t)}))}function b(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))}function O(){e.cookies&&l&&h("ahoy_events",JSON.stringify(d),1)}function k(){var t=document.querySelector("meta[name=csrf-token]");return t&&t.content}function j(t){var e=k();e&&t.setRequestHeader("X-CSRF-Token",e)}function x(t,n,r){if(l)if(s&&s.ajax)s.ajax({type:"POST",url:t,data:JSON.stringify(n),contentType:"application/json; charset=utf-8",dataType:"json",beforeSend:j,success:r,headers:e.headers,xhrFields:{withCredentials:e.withCredentials}});else{var i=new XMLHttpRequest;for(var o in i.open("POST",t,!0),i.withCredentials=e.withCredentials,i.setRequestHeader("Content-Type","application/json"),e.headers)e.headers.hasOwnProperty(o)&&i.setRequestHeader(o,e.headers[o]);i.onload=function(){200===i.status&&r()},j(i),i.send(JSON.stringify(n))}}function P(t){var n={events:[t]};return e.cookies&&(n.visit_token=t.visit_token,n.visitor_token=t.visitor_token),delete t.visit_token,delete t.visitor_token,n}function S(t){n.ready((function(){x(f(),P(t),(function(){for(var e=0;e<d.length;e++)if(d[e].id==t.id){d.splice(e,1);break}O()}))}))}function E(){return e.page||window.location.pathname}function _(t){return t&&t.length>0?t:null}function C(){return function(t){for(var e in t)t.hasOwnProperty(e)&&null===t[e]&&delete t[e];return t}({tag:this.tagName.toLowerCase(),id:_(this.id),class:_(this.className),page:E(),section:D(this)})}function D(t){for(;t&&t!==document;t=t.parentNode)if(t.hasAttribute("data-section"))return t.getAttribute("data-section");return null}function A(){if(c=!1,r=n.getVisitId(),i=n.getVisitorId(),o=v("ahoy_track"),!1===e.cookies||!1===e.trackVisits)y("Visit tracking disabled"),w();else if(r&&i&&!o)y("Active visit"),w();else if(r||h("ahoy_visit",r=b(),e.visitDuration),v("ahoy_visit")){y("Visit started"),i||h("ahoy_visitor",i=b(),e.visitorDuration);var t={visit_token:r,visitor_token:i,platform:e.platform,landing_page:window.location.href,screen_width:window.screen.width,screen_height:window.screen.height,js:!0};for(var a in document.referrer.length>0&&(t.referrer=document.referrer),e.visitParams)e.visitParams.hasOwnProperty(a)&&(t[a]=e.visitParams[a]);y(t),x(e.urlPrefix+e.visitsUrl,t,(function(){p("ahoy_track"),w()}))}else y("Cookies disabled"),w()}n.ready=function(t){c?t():u.push(t)},n.getVisitId=n.getVisitToken=function(){return v("ahoy_visit")},n.getVisitorId=n.getVisitorToken=function(){return v("ahoy_visitor")},n.reset=function(){return p("ahoy_visit"),p("ahoy_visitor"),p("ahoy_events"),p("ahoy_track"),!0},n.debug=function(t){return!1===t?p("ahoy_debug"):h("ahoy_debug","t",525600),!0},n.track=function(t,r){var i={name:t,properties:r||{},time:(new Date).getTime()/1e3,id:b(),js:!0};return n.ready((function(){e.cookies&&!n.getVisitId()&&A(),n.ready((function(){var t;y(i),i.visit_token=n.getVisitId(),i.visitor_token=n.getVisitorId(),(e.useBeacon||e.trackNow)&&(t=e.headers,0===Object.keys(t).length)&&l&&void 0!==window.navigator.sendBeacon&&!e.withCredentials?function(t){n.ready((function(){var e,n=P(t),r=(e=document.querySelector("meta[name=csrf-param]"))&&e.content,i=k();r&&i&&(n[r]=i),n.events_json=JSON.stringify(n.events),delete n.events,window.navigator.sendBeacon(f(),function(t){var e=new FormData;for(var n in t)t.hasOwnProperty(n)&&e.append(n,t[n]);return e}(n))}))}(i):(d.push(i),O(),setTimeout((function(){S(i)}),1e3))}))})),!0},n.trackView=function(t){var e={url:window.location.href,title:document.title,page:E()};if(t)for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.track("$view",e)},n.trackClicks=function(t){if(void 0===t)throw new Error("Missing selector");m("click",t,(function(t){var e=C.call(this,t);e.text="input"==e.tag?this.value:(this.textContent||this.innerText||this.innerHTML).replace(/[\s\r\n]+/g," ").trim(),e.href=this.href,n.track("$click",e)}))},n.trackSubmits=function(t){if(void 0===t)throw new Error("Missing selector");m("submit",t,(function(t){var e=C.call(this,t);n.track("$submit",e)}))},n.trackChanges=function(t){if(y("trackChanges is deprecated and will be removed in 0.5.0"),void 0===t)throw new Error("Missing selector");m("change",t,(function(t){var e=C.call(this,t);n.track("$change",e)}))};try{d=JSON.parse(v("ahoy_events")||"[]")}catch(t){}for(var T=0;T<d.length;T++)S(d[T]);n.start=function(){A(),n.start=function(){}},a=function(){e.startOnReady&&n.start()},"interactive"===document.readyState||"complete"===document.readyState?setTimeout(a,0):document.addEventListener("DOMContentLoaded",a);var H=n;"undefined"!=typeof window&&void 0===window.HarleyEventStore&&(window.HarleyEventStore=H)}}]);
//# sourceMappingURL=914.f9a6c543a9878e9be82d.js.map